# API Key å®‰å…¨ç®¡ç†åŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

æœ¬ç³»ç»Ÿä¸ºAPI Keyç®¡ç†æ·»åŠ äº†å®‰å…¨ä¿æŠ¤åŠŸèƒ½ï¼ŒåŒ…æ‹¬è„±æ•æ˜¾ç¤ºå’Œè¶…çº§ç®¡ç†å‘˜å¯†ç éªŒè¯ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”’ è„±æ•æ˜¾ç¤º
- **è§„åˆ™**: API Keyè¶…è¿‡8ä½æ—¶æ˜¾ç¤ºå‰8ä½ + `***`
- **ç¤ºä¾‹**:
  - `short` â†’ `short` (8ä½åŠä»¥ä¸‹æ˜¾ç¤ºå®Œæ•´)
  - `abcdefgh` â†’ `abcdefgh` (8ä½æ˜¾ç¤ºå®Œæ•´)
  - `abcdefghi` â†’ `abcdefgh***` (è¶…è¿‡8ä½è„±æ•)
  - `demo-api-key-1` â†’ `demo-api***` (è„±æ•æ˜¾ç¤º)

### ğŸ”‘ è¶…çº§ç®¡ç†å‘˜å¯†ç éªŒè¯
- **é»˜è®¤å¯†ç **: `F511522591`
- **ç¯å¢ƒå˜é‡**: å¯é€šè¿‡ `ADMIN_PASSWORD` ç¯å¢ƒå˜é‡è¦†ç›–
- **ç”¨é€”**: æŸ¥çœ‹å®Œæ•´çš„API Keyæ•æ„Ÿä¿¡æ¯

## ä½¿ç”¨æ–¹æ³•

### 1. æŸ¥çœ‹è„±æ•çš„API Key
åœ¨API Keyç®¡ç†é¡µé¢ä¸­ï¼ŒAPI Keyåˆ—ä¼šè‡ªåŠ¨æ˜¾ç¤ºè„±æ•åçš„å†…å®¹ã€‚

### 2. æŸ¥çœ‹å®Œæ•´API Keyä¿¡æ¯
1. ç‚¹å‡»API Keyæ—è¾¹çš„ ğŸ”“ è§£é”å›¾æ ‡
2. åœ¨å¼¹å‡ºçš„å¯†ç éªŒè¯æ¡†ä¸­è¾“å…¥è¶…çº§ç®¡ç†å‘˜å¯†ç 
3. éªŒè¯æˆåŠŸåä¼šæ˜¾ç¤ºå®Œæ•´çš„API Keyä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
   - å®Œæ•´çš„API Key
   - Access Key
   - Access Secret
   - å…¶ä»–é…ç½®ä¿¡æ¯

### 3. é…ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç 

#### æ–¹æ³•1: ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰
```bash
export ADMIN_PASSWORD=your_custom_password
```

#### æ–¹æ³•2: ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶
ç¼–è¾‘ `config/project.config.ts` ä¸­çš„ `adminPassword` å­—æ®µï¼š
```typescript
adminPassword: 'your_custom_password'
```

## API æ¥å£

### éªŒè¯è¶…çº§ç®¡ç†å‘˜å¯†ç 
```http
POST /internal-api/keys/verify-admin-password
Content-Type: application/json

{
  "password": "F511522591"
}
```

**å“åº”**:
```json
{
  "code": 200,
  "message": "å¯†ç éªŒè¯æˆåŠŸ",
  "data": {
    "isValid": true,
    "timestamp": "2025-08-29T01:20:42.427Z"
  }
}
```

### è·å–å®Œæ•´API Keyä¿¡æ¯
```http
POST /internal-api/keys/full-detail/{apiKey}
Content-Type: application/json

{
  "password": "F511522591"
}
```

**å“åº”**:
```json
{
  "code": 200,
  "message": "è·å–å®Œæ•´ä¿¡æ¯æˆåŠŸ",
  "data": {
    "apiKey": "demo-api-key-1",
    "alias": "è¥é”€äº‘å†…éƒ¨ç¯å¢ƒ",
    "description": "å¼€å‘ç¯å¢ƒAPI Key 1",
    "openapi": {
      "accessKey": "AK-764887602601150724-2786",
      "accessSecret": "0de4a159402a4e3494f76669ac92d6e6",
      "bizType": "8",
      "baseUrl": "https://api-westus.nxlink.ai"
    },
    "verifiedAt": "2025-08-29T01:20:56.884Z"
  }
}
```

## å®‰å…¨è¯´æ˜

1. **å‰ç«¯ä¸æ˜¾ç¤ºæ•æ„Ÿä¿¡æ¯**: Access Keyå’ŒAccess Secreté»˜è®¤ä¸åœ¨å‰ç«¯æ˜¾ç¤º
2. **å¯†ç ä¿æŠ¤**: åªæœ‰é€šè¿‡è¶…çº§ç®¡ç†å‘˜å¯†ç éªŒè¯æ‰èƒ½æŸ¥çœ‹å®Œæ•´ä¿¡æ¯
3. **å®¡è®¡æ—¥å¿—**: æ‰€æœ‰å¯†ç éªŒè¯å’Œå®Œæ•´ä¿¡æ¯æŸ¥çœ‹æ“ä½œéƒ½ä¼šè®°å½•æ—¥å¿—
4. **ç¯å¢ƒéš”ç¦»**: ä¸åŒç¯å¢ƒå¯ä»¥é…ç½®ä¸åŒçš„è¶…çº§ç®¡ç†å‘˜å¯†ç 

## æ³¨æ„äº‹é¡¹

- è¶…çº§ç®¡ç†å‘˜å¯†ç å»ºè®®å®šæœŸæ›´æ¢
- ç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®è‡ªå®šä¹‰å¯†ç 
- å¯†ç éªŒè¯å¤±è´¥æ—¶ä¼šè¿”å›403é”™è¯¯ï¼Œä¸ä¼šæ³„éœ²å¯†ç ä¿¡æ¯
- æ‰€æœ‰æ“ä½œéƒ½ä¼šè®°å½•åœ¨åç«¯æ—¥å¿—ä¸­ï¼Œä¾¿äºå®¡è®¡

## æµ‹è¯•éªŒè¯

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æµ‹è¯•åŠŸèƒ½ï¼š

```bash
# æµ‹è¯•å¯†ç éªŒè¯
curl -X POST 'http://localhost:8400/internal-api/keys/verify-admin-password' \
  -H 'Content-Type: application/json' \
  -d '{"password":"F511522591"}'

# æµ‹è¯•è·å–å®Œæ•´ä¿¡æ¯
curl -X POST 'http://localhost:8400/internal-api/keys/full-detail/demo-api-key-1' \
  -H 'Content-Type: application/json' \
  -d '{"password":"F511522591"}'
```
