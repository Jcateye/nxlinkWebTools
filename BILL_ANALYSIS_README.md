# 📊 账单数据分析系统使用指南

## 🎯 功能概述

账单数据分析系统是一个强大的数据分析工具，专门用于分析AI语音通话系统的账单数据。系统支持多文件批量导入，提供多维度数据分析和可视化报表。

## ✨ 核心功能

### 1. 多文件数据导入
- **支持格式**：CSV、Excel (.xlsx, .xls)
- **批量上传**：支持同时上传多个文件
- **自动去重**：基于关键字段自动识别并去除重复记录
- **数据验证**：自动检测数据格式和完整性

### 2. 三维数据分析

#### 📞 用量分析
- **通话统计**：总通话次数、AI/线路通话时长
- **方向分析**：呼入vs呼出通话分布
- **时段分析**：24小时通话高峰时段识别
- **流程排行**：最热门的Agent流程TOP榜

#### 💰 消费分析  
- **消费构成**：AI消费 vs 线路消费占比
- **客户排行**：按消费金额的客户排名
- **趋势分析**：日消费趋势变化
- **效率指标**：平均每次通话消费

#### 📊 成本分析
- **成本分解**：ASR、TTS、LLM成本明细
- **盈利分析**：收入、成本、利润、利润率
- **效率比**：收入成本效率比分析
- **客户盈利能力**：各客户的盈利贡献

### 3. 可视化展示
- **数据概览**：关键指标仪表板
- **统计图表**：环形图、柱状图、趋势图
- **排行榜**：多维度TOP排行
- **时段热力**：通话时段分布可视化

### 4. 报告导出
- **Excel报告**：包含所有分析维度的详细报告
- **多工作表**：数据概览、用量、消费、成本、趋势分析
- **格式化数据**：自动格式化的专业报告

## 🚀 使用方法

### 步骤1：文件准备
确保你的CSV/Excel文件包含以下关键字段：
```
消费时间, Agent流程名称, 用户号码, 客户名称, AI消费(USD), 线路消费(USD), 
AI通话时长(秒), 线路通话时长(秒), ASR成本, TTS成本, LLM成本, 等...
```

### 步骤2：数据导入
1. 打开 `运营后台工具 > 账单数据分析`
2. 点击或拖拽文件到上传区域
3. 系统自动检测文件格式并显示文件列表
4. 点击 "开始解析" 按钮

### 步骤3：查看分析
- 系统自动完成数据分析并显示结果
- 浏览各个分析维度的图表和统计数据
- 查看数据概览和关键指标

### 步骤4：导出报告  
- 点击 "导出报告" 按钮
- 下载包含所有分析结果的Excel文件
- 报告可用于业务汇报和决策支持

## 📋 支持的数据字段

### 必需字段
- `消费时间` / `feeTime`: 通话发生时间
- `客户名称` / `customerName`: 客户标识
- `Agent流程名称` / `agentFlowName`: 使用的AI流程

### 消费相关
- `AI消费(USD)` / `customerTotalPriceUSD`: AI服务消费金额
- `线路消费(USD)` / `sipTotalCustomerOriginalPriceUSD`: 线路消费金额
- `AI消费(原币种)` / `customerTotalPrice`: 原始币种AI消费
- `线路消费(原币种)` / `sipTotalCustomerOriginalPrice`: 原始币种线路消费

### 用量相关  
- `AI通话时长(秒)` / `callDurationSec`: AI处理时长
- `线路通话时长(秒)` / `sipCallDurationSec`: 线路通话时长
- `呼叫方向` / `callDirection`: 1=呼出, 2=呼入
- `用户号码` / `callee`: 用户电话号码

### 成本相关
- `AI总成本` / `totalCost`: AI服务总成本
- `ASR成本` / `asrCost`: 语音识别成本  
- `TTS成本` / `ttsCost`: 语音合成成本
- `LLM成本` / `llmCost`: 大语言模型成本

## 💡 分析洞察示例

### 用量优化建议
- **高峰时段识别**：通过时段分析识别通话高峰，优化资源配置
- **流程效率对比**：分析不同Agent流程的使用频率和效果
- **通话质量监控**：通过时长分析识别异常通话

### 成本控制建议  
- **成本结构优化**：分析ASR/TTS/LLM成本占比，优化AI服务配置
- **客户盈利分析**：识别高价值客户和亏损客户
- **定价策略优化**：基于成本分析调整服务定价

### 业务增长建议
- **客户价值挖掘**：识别消费潜力大的客户进行重点服务  
- **服务改进方向**：基于使用数据优化AI流程和服务质量
- **市场拓展机会**：分析成功客户模式，指导市场开拓

## 🔧 技术特性

- **高性能处理**：支持大文件批量处理（单文件最大100MB）
- **内存优化**：采用流式处理避免内存溢出
- **数据安全**：本地处理，数据不上传到服务器
- **格式兼容**：智能识别中英文字段名
- **错误处理**：友好的错误提示和数据校验

## 📞 联系支持

如果在使用过程中遇到问题，请：
1. 检查数据文件格式是否正确
2. 确保必需字段完整
3. 查看系统错误提示信息
4. 联系技术支持团队

---

*账单数据分析系统 - 让数据驱动业务决策* 🚀
